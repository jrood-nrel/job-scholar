variables:
  executable: &executable 'amr_wind'
  amrwind_spec: &amrwind_spec 'amr-wind'
  amrwind_input_file: &amrwind_input_file '/kfs3/scratch/jrood/amr-wind/test/test_files/abl_godunov/abl_godunov.inp'

job_set:
  name: amrwind-kestrel-cpu-weak-scale
  email: jon.rood@nrel.gov
  mail_type: NONE
  project_allocation: hpcapps
  notes: AMR-Wind Kestrel CPU weak scaling
  exawind_manager: '${HOME}/exawind-manager'
  environment: 'amr-wind-cpu'
  job_list:
    - {spec: *amrwind_spec, executable: *executable, input_file: *amrwind_input_file, files_to_copy: [], mesh:, queue: short, mapping: 1-rank-per-core, compiler: gcc, minutes: 30, nodes: 1, awind_ranks: 208, nwind_ranks: 0, profile:, pre_args:, post_args: 'amr.n_cell=256 256 256 geometry.prob_hi=1000. 1000. 1000. time.fixed_dt=0.02 time.max_step=10 time.plot_interval=-1 time.checkpoint_interval=-1 amrex.abort_on_out_of_gpu_memory=1 amrex.the_arena_is_managed=0 amr.blocking_factor=8 amr.max_grid_size=64 amrex.use_profiler_syncs=0 amrex.async_out=0'}
    - {spec: *amrwind_spec, executable: *executable, input_file: *amrwind_input_file, files_to_copy: [], mesh:, queue: short, mapping: 1-rank-per-core, compiler: gcc, minutes: 30, nodes: 2, awind_ranks: 208, nwind_ranks: 0, profile:, pre_args:, post_args: 'amr.n_cell=512 256 256 geometry.prob_hi=2000. 1000. 1000. time.fixed_dt=0.02 time.max_step=10 time.plot_interval=-1 time.checkpoint_interval=-1 amrex.abort_on_out_of_gpu_memory=1 amrex.the_arena_is_managed=0 amr.blocking_factor=8 amr.max_grid_size=64 amrex.use_profiler_syncs=0 amrex.async_out=0'}
    - {spec: *amrwind_spec, executable: *executable, input_file: *amrwind_input_file, files_to_copy: [], mesh:, queue: short, mapping: 1-rank-per-core, compiler: gcc, minutes: 30, nodes: 4, awind_ranks: 208, nwind_ranks: 0, profile:, pre_args:, post_args: 'amr.n_cell=512 512 256 geometry.prob_hi=2000. 2000. 1000. time.fixed_dt=0.02 time.max_step=10 time.plot_interval=-1 time.checkpoint_interval=-1 amrex.abort_on_out_of_gpu_memory=1 amrex.the_arena_is_managed=0 amr.blocking_factor=8 amr.max_grid_size=64 amrex.use_profiler_syncs=0 amrex.async_out=0'}
    - {spec: *amrwind_spec, executable: *executable, input_file: *amrwind_input_file, files_to_copy: [], mesh:, queue: short, mapping: 1-rank-per-core, compiler: gcc, minutes: 30, nodes: 8, awind_ranks: 208, nwind_ranks: 0, profile:, pre_args:, post_args: 'amr.n_cell=1024 512 256 geometry.prob_hi=4000. 2000. 1000. time.fixed_dt=0.02 time.max_step=10 time.plot_interval=-1 time.checkpoint_interval=-1 amrex.abort_on_out_of_gpu_memory=1 amrex.the_arena_is_managed=0 amr.blocking_factor=8 amr.max_grid_size=64 amrex.use_profiler_syncs=0 amrex.async_out=0'}
    - {spec: *amrwind_spec, executable: *executable, input_file: *amrwind_input_file, files_to_copy: [], mesh:, queue: short, mapping: 1-rank-per-core, compiler: gcc, minutes: 30, nodes: 16, awind_ranks: 208, nwind_ranks: 0, profile:, pre_args:, post_args: 'amr.n_cell=1024 1024 256 geometry.prob_hi=4000. 4000. 1000. time.fixed_dt=0.02 time.max_step=10 time.plot_interval=-1 time.checkpoint_interval=-1 amrex.abort_on_out_of_gpu_memory=1 amrex.the_arena_is_managed=0 amr.blocking_factor=8 amr.max_grid_size=64 amrex.use_profiler_syncs=0 amrex.async_out=0'}
    - {spec: *amrwind_spec, executable: *executable, input_file: *amrwind_input_file, files_to_copy: [], mesh:, queue: short, mapping: 1-rank-per-core, compiler: gcc, minutes: 30, nodes: 32, awind_ranks: 208, nwind_ranks: 0, profile:, pre_args:, post_args: 'amr.n_cell=2048 1024 256 geometry.prob_hi=8000. 4000. 1000. time.fixed_dt=0.02 time.max_step=10 time.plot_interval=-1 time.checkpoint_interval=-1 amrex.abort_on_out_of_gpu_memory=1 amrex.the_arena_is_managed=0 amr.blocking_factor=8 amr.max_grid_size=64 amrex.use_profiler_syncs=0 amrex.async_out=0'}
    - {spec: *amrwind_spec, executable: *executable, input_file: *amrwind_input_file, files_to_copy: [], mesh:, queue: short, mapping: 1-rank-per-core, compiler: gcc, minutes: 30, nodes: 64, awind_ranks: 208, nwind_ranks: 0, profile:, pre_args:, post_args: 'amr.n_cell=2048 2048 256 geometry.prob_hi=8000. 8000. 1000. time.fixed_dt=0.02 time.max_step=10 time.plot_interval=-1 time.checkpoint_interval=-1 amrex.abort_on_out_of_gpu_memory=1 amrex.the_arena_is_managed=0 amr.blocking_factor=8 amr.max_grid_size=64 amrex.use_profiler_syncs=0 amrex.async_out=0'}
    - {spec: *amrwind_spec, executable: *executable, input_file: *amrwind_input_file, files_to_copy: [], mesh:, queue: short, mapping: 1-rank-per-core, compiler: gcc, minutes: 30, nodes: 128, awind_ranks: 208, nwind_ranks: 0, profile:, pre_args:, post_args: 'amr.n_cell=4096 2048 256 geometry.prob_hi=16000. 8000. 1000. time.fixed_dt=0.02 time.max_step=10 time.plot_interval=-1 time.checkpoint_interval=-1 amrex.abort_on_out_of_gpu_memory=1 amrex.the_arena_is_managed=0 amr.blocking_factor=8 amr.max_grid_size=64 amrex.use_profiler_syncs=0 amrex.async_out=0'}
    - {spec: *amrwind_spec, executable: *executable, input_file: *amrwind_input_file, files_to_copy: [], mesh:, queue: short, mapping: 1-rank-per-core, compiler: gcc, minutes: 30, nodes: 256, awind_ranks: 208, nwind_ranks: 0, profile:, pre_args:, post_args: 'amr.n_cell=4096 4096 256 geometry.prob_hi=16000. 16000. 1000. time.fixed_dt=0.02 time.max_step=10 time.plot_interval=-1 time.checkpoint_interval=-1 amrex.abort_on_out_of_gpu_memory=1 amrex.the_arena_is_managed=0 amr.blocking_factor=8 amr.max_grid_size=64 amrex.use_profiler_syncs=0 amrex.async_out=0'}
    - {spec: *amrwind_spec, executable: *executable, input_file: *amrwind_input_file, files_to_copy: [], mesh:, queue: short, mapping: 1-rank-per-core, compiler: gcc, minutes: 30, nodes: 512, awind_ranks: 208, nwind_ranks: 0, profile:, pre_args:, post_args: 'amr.n_cell=8192 4096 256 geometry.prob_hi=32000. 16000. 1000. time.fixed_dt=0.02 time.max_step=10 time.plot_interval=-1 time.checkpoint_interval=-1 amrex.abort_on_out_of_gpu_memory=1 amrex.the_arena_is_managed=0 amr.blocking_factor=8 amr.max_grid_size=64 amrex.use_profiler_syncs=0 amrex.async_out=0'}
